var t=function(t,i){void 0===i&&(i=1);for(var r=[],n=t.length,e=Math.floor(n/i),s=0;s<e;s++){for(var o=[],h=0;h<i;h++)o.push(t[s*i+h]);r.push(o)}return n%i!=0&&r.push(t.slice(e*i,n)),r},i=function(t,i){var r;switch(i){case"phone":r=/^[1][3456789][0-9]{9}$/;break;case"mail":r=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-])+$/;break;case"idcard":r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;break;case"account":r=/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/;break;case"number":r=/^[0-9]*$/;break;default:return!1}return r.test(t)},r=function(t){var i=t.split("?")[1];i=i.split("&");var r={};return i.forEach((function(t){var i=t.split("=");r[i[0]]=i[1]||null})),r},n=function(t){for(var i=t,r=0,n=0,e=i.length;n<e;n++){var s=i.charCodeAt(n);r+=s>=1&&s<=126||65376<=s&&s<=65439?1:2}return r},e=function(){if("undefined"==typeof navigator)throw new Error("Is not currently a browser environment");var t=navigator.userAgent,i=t.indexOf("Android")>-1||t.indexOf("Adr")>-1;return!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?"ios":i?"android":void 0};function s(t){for(var i=t.length-1;i>=0;i--){var r=Math.floor(Math.random()*(i+1)),n=t[r];t[r]=t[i],t[i]=n}return t}var o=function(t,i,r){for(var n=0,e="",s=0,o=t.length;s<o;s++){var h=t.charCodeAt(s);if(n>=r&&null!=r)break;n>=i&&(e+=t[s]),n+=h>=1&&h<=126||65376<=h&&h<=65439?1:2}return e},h=function(){setTimeout((function(){var t=document.documentElement.scrollTop||document.body.scrollTop;window.scrollTo(0,t+1),window.scrollTo(0,t-1)}),17)};function a(t){return new Promise((function(i,r){var n=new FileReader;n.readAsText(t,"utf-8"),n.onload=function(){i(n.result.toString())},n.onerror=function(t){r(t)}}))}var u=function(){function t(){}return t.on=function(t,i,r){void 0===r&&(r={}),void 0!==t&&void 0!==i?(t in this._events||(this._events[t]=[]),this._events[t].length>=this.MAX_LISTENERS?console.error("".concat(t,"'s number of listeners has reached the limit")):r.only&&0!==this._events[t].length||this._events[t].push({handler:i,once:null!=r.once&&r.once})):console.error("event or listener is required!")},t.emit=function(t){for(var i=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!(t in this._events))return!1;var e=this._events[t];try{e.forEach((function(n){n.handler.apply(n,r),n.once&&i.removeListener(t,n.handler)}))}catch(t){console.error(t)}},t.once=function(t,i){this.on(t,i,{once:!0})},t.off=function(t,i){this.removeListener(t,i)},t.removeListener=function(t,i){if(!(t in this._events))return console.warn("there is no event named ".concat(t)),!1;for(var r=null,n=0,e=this._events[t].length;n<e;n++)if(this._events[t][n].handler===i){r=n;break}null!==r&&this._events[t].splice(r,1)},t.removeAllListener=function(t){if(void 0===this._events[t])return console.warn("there is no event named ".concat(t)),!1;this._events[t]=[]},t.setMaxListeners=function(t){this.MAX_LISTENERS=t},t.clear=function(){this._events=Object.create(null)},t._events=Object.create(null),t.MAX_LISTENERS=30,t}(),c=function(){return new Promise((function(t,i){if(requestAnimationFrame&&performance){var r=0;requestAnimationFrame((function(i){r=i,requestAnimationFrame((function(i){t(i-r)}))}))}else i(0)}))},p=function(t){var i=new Date;return t&&"ms"!==t?"s"===t?Math.round(i.getTime()/1e3):void 0:i.getTime()};function y(t){var i=t-(new Date).getTime();if(i<=0)return{day:0,time:"00:00:00"};var r=Math.floor(i/864e5);i-=864e5*r;var n=Math.floor(i/36e5);i-=36e5*n;var e=Math.floor(i/6e4);i-=6e4*e;var s=Math.floor(i/1e3);return{day:r,time:"".concat(n.toString().padStart(2,"0"),":").concat(e.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))}}var l=function(t,i){var r=typeof t;return"object"!==r?i?r.charAt(0).toUpperCase()+r.slice(1,r.length)==i:r.charAt(0).toUpperCase()+r.slice(1,r.length):i?Object.prototype.toString.call(t).replace(/^\[object (\S+)\]$/,"$1")==i:Object.prototype.toString.call(t).replace(/^\[object (\S+)\]$/,"$1")},f=function(t,i){if(!1===l(t,"Number"))throw new Error("expected number");if(!i)throw new Error("type is necessary");var r,n=new Date;switch(i){case"yyyy-mm-dd":r=n.getFullYear()+"-"+x(n.getMonth())+"-"+x(n.getDate());break;case"h:m:s":r=x(n.getHours())+":"+x(n.getMinutes())+":"+x(n.getSeconds());break;case"yyyy-mm-dd h:m:s":r=n.getFullYear()+"-"+x(n.getMonth())+"-"+x(n.getDate())+" "+x(n.getHours())+":"+x(n.getMinutes())+":"+x(n.getSeconds())}return r};function x(t){return(t=t.toString()).length>1?t:"0"+t}var m,d=function(t,i){if(!l(t,"Function"))throw new Error("func expected function");if(!l(i,"Number"))throw new Error("wait expected number");var r=0;return function(){var n=p(),e=this;n-r>=i&&(t.apply(e,arguments),r=n)}};function M(t){return t.userAgent.indexOf("Window")>0?m.Windows:t.userAgent.indexOf("Mac OS X")>0?m.Mac:t.userAgent.indexOf("Linux")>0?m.Linux:void 0}!function(t){t.Windows="Windows",t.Mac="Mac",t.Linux="Linux"}(m||(m={}));var z=function(t){var i=l(t);if("Array"!=i&&"Object"!=i)throw new Error("expected Array or Object");var r=JSON.stringify(t);return JSON.parse(r)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function w(t,i){var r,n,e,s,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function h(s){return function(h){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(e=2&s[0]?n.return:s[0]?n.throw||((e=n.return)&&e.call(n),0):n.next)&&!(e=e.call(n,s[1])).done)return e;switch(n=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(e=o.trys,(e=e.length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){o.label=s[1];break}if(6===s[0]&&o.label<e[1]){o.label=e[1],e=s;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(s);break}e[2]&&o.ops.pop(),o.trys.pop();continue}s=i.call(t,o)}catch(t){s=[6,t],n=0}finally{r=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,h])}}}function b(t,i,r){if(r||2===arguments.length)for(var n,e=0,s=i.length;e<s;e++)!n&&e in i||(n||(n=Array.prototype.slice.call(i,0,e)),n[e]=i[e]);return t.concat(n||Array.prototype.slice.call(i))}var v=function(t,i,r){if(void 0===r&&(r=!0),!l(t,"Function"))throw new Error("func expected function");if(!l(i,"Number"))throw new Error("wait expected number");var n=0,e=null;return function(){for(var s=this,o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];r?(p()>n&&t.apply.apply(t,b([this],o,!1)),n=p()+i):(e&&(clearTimeout(e),e=null),e=setTimeout((function(){t.apply.apply(t,b([s],o,!1)),e=null}),i))}},_=function(t,i,r,n,e,s,o,h){var a=t+r/2,u=i+n/2,c=e+o/2,p=s+h/2,y=Math.abs(c-a),l=Math.abs(p-u);return(r+o)/2>y&&(n+h)/2>l},g=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],S=1234567,A=Math.PI/180,E=180/Math.PI;function C(t,i,r){return Math.max(i,Math.min(r,t))}function P(t,i){return(t%i+i)%i}function T(t,i,r){return(1-r)*t+r*i}var k={DEG2RAD:A,RAD2DEG:E,generateUUID:function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(g[255&t]+g[t>>8&255]+g[t>>16&255]+g[t>>24&255]+"-"+g[255&i]+g[i>>8&255]+"-"+g[i>>16&15|64]+g[i>>24&255]+"-"+g[63&r|128]+g[r>>8&255]+"-"+g[r>>16&255]+g[r>>24&255]+g[255&n]+g[n>>8&255]+g[n>>16&255]+g[n>>24&255]).toLowerCase()},clamp:C,euclideanModulo:P,mapLinear:function(t,i,r,n,e){return n+(t-i)*(e-n)/(r-i)},inverseLerp:function(t,i,r){return t!==i?(r-t)/(i-t):0},lerp:T,damp:function(t,i,r,n){return T(t,i,1-Math.exp(-r*n))},pingpong:function(t,i){return void 0===i&&(i=1),i-Math.abs(P(t,2*i)-i)},smoothstep:function(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i))*t*(3-2*t)},smootherstep:function(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(S=t);var i=S+=1831565813;return i=Math.imul(i^i>>>15,1|i),(((i^=i+Math.imul(i^i>>>7,61|i))^i>>>14)>>>0)/4294967296},degToRad:function(t){return t*A},radToDeg:function(t){return t*E},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,r,n,e){var s=Math.cos,o=Math.sin,h=s(r/2),a=o(r/2),u=s((i+n)/2),c=o((i+n)/2),p=s((i-n)/2),y=o((i-n)/2),l=s((n-i)/2),f=o((n-i)/2);switch(e){case"XYX":t.set(h*c,a*p,a*y,h*u);break;case"YZY":t.set(a*y,h*c,a*p,h*u);break;case"ZXZ":t.set(a*p,a*y,h*c,h*u);break;case"XZX":t.set(h*c,a*f,a*l,h*u);break;case"YXY":t.set(a*l,h*c,a*f,h*u);break;case"ZYZ":t.set(a*f,a*l,h*c,h*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}},normalize:function(t,i){switch(i.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}},denormalize:function(t,i){switch(i.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}},q=function(){function t(t,i,r,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=1),this.isQuaternion=!0,this._x=t,this._y=i,this._z=r,this._w=n}return t.slerpFlat=function(t,i,r,n,e,s,o){var h=r[n+0],a=r[n+1],u=r[n+2],c=r[n+3],p=e[s+0],y=e[s+1],l=e[s+2],f=e[s+3];if(0===o)return t[i+0]=h,t[i+1]=a,t[i+2]=u,void(t[i+3]=c);if(1===o)return t[i+0]=p,t[i+1]=y,t[i+2]=l,void(t[i+3]=f);if(c!==f||h!==p||a!==y||u!==l){var x=1-o,m=h*p+a*y+u*l+c*f,d=m>=0?1:-1,M=1-m*m;if(M>Number.EPSILON){var z=Math.sqrt(M),w=Math.atan2(z,m*d);x=Math.sin(x*w)/z,o=Math.sin(o*w)/z}var b=o*d;if(h=h*x+p*b,a=a*x+y*b,u=u*x+l*b,c=c*x+f*b,x===1-o){var v=1/Math.sqrt(h*h+a*a+u*u+c*c);h*=v,a*=v,u*=v,c*=v}}t[i]=h,t[i+1]=a,t[i+2]=u,t[i+3]=c},t.multiplyQuaternionsFlat=function(t,i,r,n,e,s){var o=r[n],h=r[n+1],a=r[n+2],u=r[n+3],c=e[s],p=e[s+1],y=e[s+2],l=e[s+3];return t[i]=o*l+u*c+h*y-a*p,t[i+1]=h*l+u*p+a*c-o*y,t[i+2]=a*l+u*y+o*p-h*c,t[i+3]=u*l-o*c-h*p-a*y,t},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()},enumerable:!1,configurable:!0}),t.prototype.set=function(t,i,r,n){return this._x=t,this._y=i,this._z=r,this._w=n,this._onChangeCallback(),this},t.prototype.clone=function(){return new t(this._x,this._y,this._z,this._w)},t.prototype.copy=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},t.prototype.setFromEuler=function(t,i){var r=t._x,n=t._y,e=t._z,s=t._order,o=Math.cos,h=Math.sin,a=o(r/2),u=o(n/2),c=o(e/2),p=h(r/2),y=h(n/2),l=h(e/2);switch(s){case"XYZ":this._x=p*u*c+a*y*l,this._y=a*y*c-p*u*l,this._z=a*u*l+p*y*c,this._w=a*u*c-p*y*l;break;case"YXZ":this._x=p*u*c+a*y*l,this._y=a*y*c-p*u*l,this._z=a*u*l-p*y*c,this._w=a*u*c+p*y*l;break;case"ZXY":this._x=p*u*c-a*y*l,this._y=a*y*c+p*u*l,this._z=a*u*l+p*y*c,this._w=a*u*c-p*y*l;break;case"ZYX":this._x=p*u*c-a*y*l,this._y=a*y*c+p*u*l,this._z=a*u*l-p*y*c,this._w=a*u*c+p*y*l;break;case"YZX":this._x=p*u*c+a*y*l,this._y=a*y*c+p*u*l,this._z=a*u*l-p*y*c,this._w=a*u*c-p*y*l;break;case"XZY":this._x=p*u*c-a*y*l,this._y=a*y*c-p*u*l,this._z=a*u*l+p*y*c,this._w=a*u*c+p*y*l;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==i&&this._onChangeCallback(),this},t.prototype.setFromAxisAngle=function(t,i){var r=i/2,n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this._onChangeCallback(),this},t.prototype.setFromRotationMatrix=function(t){var i=t.elements,r=i[0],n=i[4],e=i[8],s=i[1],o=i[5],h=i[9],a=i[2],u=i[6],c=i[10],p=r+o+c;if(p>0){var y=.5/Math.sqrt(p+1);this._w=.25/y,this._x=(u-h)*y,this._y=(e-a)*y,this._z=(s-n)*y}else if(r>o&&r>c){y=2*Math.sqrt(1+r-o-c);this._w=(u-h)/y,this._x=.25*y,this._y=(n+s)/y,this._z=(e+a)/y}else if(o>c){y=2*Math.sqrt(1+o-r-c);this._w=(e-a)/y,this._x=(n+s)/y,this._y=.25*y,this._z=(h+u)/y}else{y=2*Math.sqrt(1+c-r-o);this._w=(s-n)/y,this._x=(e+a)/y,this._y=(h+u)/y,this._z=.25*y}return this._onChangeCallback(),this},t.prototype.setFromUnitVectors=function(t,i){var r=t.dot(i)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=r),this.normalize()},t.prototype.angleTo=function(t){return 2*Math.acos(Math.abs(C(this.dot(t),-1,1)))},t.prototype.rotateTowards=function(t,i){var r=this.angleTo(t);if(0===r)return this;var n=Math.min(1,i/r);return this.slerp(t,n),this},t.prototype.identity=function(){return this.set(0,0,0,1)},t.prototype.invert=function(){return this.conjugate()},t.prototype.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},t.prototype.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},t.prototype.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},t.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},t.prototype.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},t.prototype.multiply=function(t){return this.multiplyQuaternions(this,t)},t.prototype.premultiply=function(t){return this.multiplyQuaternions(t,this)},t.prototype.multiplyQuaternions=function(t,i){var r=t._x,n=t._y,e=t._z,s=t._w,o=i._x,h=i._y,a=i._z,u=i._w;return this._x=r*u+s*o+n*a-e*h,this._y=n*u+s*h+e*o-r*a,this._z=e*u+s*a+r*h-n*o,this._w=s*u-r*o-n*h-e*a,this._onChangeCallback(),this},t.prototype.slerp=function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var r=this._x,n=this._y,e=this._z,s=this._w,o=s*t._w+r*t._x+n*t._y+e*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=r,this._y=n,this._z=e,this;var h=1-o*o;if(h<=Number.EPSILON){var a=1-i;return this._w=a*s+i*this._w,this._x=a*r+i*this._x,this._y=a*n+i*this._y,this._z=a*e+i*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(h),c=Math.atan2(u,o),p=Math.sin((1-i)*c)/u,y=Math.sin(i*c)/u;return this._w=s*p+this._w*y,this._x=r*p+this._x*y,this._y=n*p+this._y*y,this._z=e*p+this._z*y,this._onChangeCallback(),this},t.prototype.slerpQuaternions=function(t,i,r){return this.copy(t).slerp(i,r)},t.prototype.random=function(){var t=Math.random(),i=Math.sqrt(1-t),r=Math.sqrt(t),n=2*Math.PI*Math.random(),e=2*Math.PI*Math.random();return this.set(i*Math.cos(n),r*Math.sin(e),r*Math.cos(e),i*Math.sin(n))},t.prototype.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},t.prototype.fromArray=function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},t.prototype.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},t.prototype.fromBufferAttribute=function(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this},t.prototype.toJSON=function(){return this.toArray()},t.prototype._onChange=function(t){return this._onChangeCallback=t,this},t.prototype._onChangeCallback=function(){},t.prototype[Symbol.iterator]=function(){return w(this,(function(t){switch(t.label){case 0:return[4,this._x];case 1:return t.sent(),[4,this._y];case 2:return t.sent(),[4,this._z];case 3:return t.sent(),[4,this._w];case 4:return t.sent(),[2]}}))},t}(),V=function(){function t(t,i,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=i,this.z=r}return t.prototype.set=function(t,i,r){return void 0===r&&(r=this.z),this.x=t,this.y=i,this.z=r,this},t.prototype.setXYZ=function(t){var i=t.x,r=t.y,n=t.z;return void 0!==i&&(this.x=i),void 0!==r&&(this.y=r),void 0!==n&&(this.z=n),this},t.prototype.size=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.length=function(){return this.size()},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},t.prototype.cross=function(i){return new t(this.y*i.z-this.z*i.y,this.z*i.x-this.x*i.z,this.x*i.y-this.y*i.x)},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},t.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},t.prototype.fromBufferAttribute=function(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this},t.prototype.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this},t.prototype.setX=function(t){return this.x=t,this},t.prototype.setY=function(t){return this.y=t,this},t.prototype.setZ=function(t){return this.z=t,this},t.prototype.setComponent=function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this},t.prototype.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},t.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this},t.prototype.addVectors=function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},t.prototype.addScaledVector=function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},t.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this},t.prototype.subVectors=function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.multiplyVectors=function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},t.prototype.applyEuler=function(t){return this.applyQuaternion(I.setFromEuler(t))},t.prototype.applyAxisAngle=function(t,i){return this.applyQuaternion(I.setFromAxisAngle(t,i))},t.prototype.applyMatrix3=function(t){var i=this.x,r=this.y,n=this.z,e=t.elements;return this.x=e[0]*i+e[3]*r+e[6]*n,this.y=e[1]*i+e[4]*r+e[7]*n,this.z=e[2]*i+e[5]*r+e[8]*n,this},t.prototype.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()},t.prototype.applyMatrix4=function(t){var i=this.x,r=this.y,n=this.z,e=t.elements,s=1/(e[3]*i+e[7]*r+e[11]*n+e[15]);return this.x=(e[0]*i+e[4]*r+e[8]*n+e[12])*s,this.y=(e[1]*i+e[5]*r+e[9]*n+e[13])*s,this.z=(e[2]*i+e[6]*r+e[10]*n+e[14])*s,this},t.prototype.applyQuaternion=function(t){var i=this.x,r=this.y,n=this.z,e=t.x,s=t.y,o=t.z,h=t.w,a=h*i+s*n-o*r,u=h*r+o*i-e*n,c=h*n+e*r-s*i,p=-e*i-s*r-o*n;return this.x=a*h+p*-e+u*-o-c*-s,this.y=u*h+p*-s+c*-e-a*-o,this.z=c*h+p*-o+a*-s-u*-e,this},t.prototype.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},t.prototype.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},t.prototype.transformDirection=function(t){var i=this.x,r=this.y,n=this.z,e=t.elements;return this.x=e[0]*i+e[4]*r+e[8]*n,this.y=e[1]*i+e[5]*r+e[9]*n,this.z=e[2]*i+e[6]*r+e[10]*n,this.normalize()},t.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},t.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},t.prototype.clamp=function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this},t.prototype.clampScalar=function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this},t.prototype.clampLength=function(t,i){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))},t.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},t.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},t.prototype.normalize=function(){return this.divideScalar(this.length()||1)},t.prototype.setLength=function(t){return this.normalize().multiplyScalar(t)},t.prototype.lerp=function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},t.prototype.lerpVectors=function(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this},t.prototype.crossVectors=function(t,i){var r=t.x,n=t.y,e=t.z,s=i.x,o=i.y,h=i.z;return this.x=n*h-e*o,this.y=e*s-r*h,this.z=r*o-n*s,this},t.prototype.projectOnVector=function(t){var i=t.lengthSq();if(0===i)return this.set(0,0,0);var r=t.dot(this)/i;return this.copy(t).multiplyScalar(r)},t.prototype.projectOnPlane=function(t){return F.copy(this).projectOnVector(t),this.sub(F)},t.prototype.reflect=function(t){return this.sub(F.copy(t).multiplyScalar(2*this.dot(t)))},t.prototype.angleTo=function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;var r=this.dot(t)/i;return Math.acos(k.clamp(r,-1,1))},t.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},t.prototype.distanceToSquared=function(t){var i=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return i*i+r*r+n*n},t.prototype.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},t.prototype.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},t.prototype.setFromSphericalCoords=function(t,i,r){var n=Math.sin(i)*t;return this.x=n*Math.sin(r),this.y=Math.cos(i)*t,this.z=n*Math.cos(r),this},t.prototype.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},t.prototype.setFromCylindricalCoords=function(t,i,r){return this.x=t*Math.sin(i),this.y=r,this.z=t*Math.cos(i),this},t.prototype.setFromMatrixPosition=function(t){var i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this},t.prototype.setFromMatrixScale=function(t){var i=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=r,this.z=n,this},t.prototype.setFromMatrixColumn=function(t,i){return this.fromArray(t.elements,4*i)},t.prototype.setFromMatrix3Column=function(t,i){return this.fromArray(t.elements,3*i)},t.prototype.setFromEuler=function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this},t.prototype.setFromColor=function(t){return this.x=t.r,this.y=t.g,this.z=t.b,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},t.prototype.fromArray=function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},t.prototype.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},t.prototype.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this},t.prototype.randomDirection=function(){var t=2*(Math.random()-.5),i=Math.random()*Math.PI*2,r=Math.sqrt(1-Math.pow(t,2));return this.x=r*Math.cos(i),this.y=r*Math.sin(i),this.z=t,this},t.prototype[Symbol.iterator]=function(){return w(this,(function(t){switch(t.label){case 0:return[4,this.x];case 1:return t.sent(),[4,this.y];case 2:return t.sent(),[4,this.z];case 3:return t.sent(),[2]}}))},t}(),F=new V,I=new q,O=function(){function t(t,i){void 0===t&&(t=new V(1/0,1/0,1/0)),void 0===i&&(i=new V(-1/0,-1/0,-1/0)),this.isBox3=!0,this.min=t,this.max=i}return t.prototype.set=function(t,i){return this.min.copy(t),this.max.copy(i),this},t.prototype.setFromArray=function(t){this.makeEmpty();for(var i=0,r=t.length;i<r;i+=3)this.expandByPoint(L.fromArray(t,i));return this},t.prototype.setFromBufferAttribute=function(t){this.makeEmpty();for(var i=0,r=t.count;i<r;i++)this.expandByPoint(L.fromBufferAttribute(t,i));return this},t.prototype.setFromPoints=function(t){this.makeEmpty();for(var i=0,r=t.length;i<r;i++)this.expandByPoint(t[i]);return this},t.prototype.setFromCenterAndSize=function(t,i){var r=L.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this},t.prototype.setFromObject=function(t,i){return void 0===i&&(i=!1),this.makeEmpty(),this.expandByObject(t,i)},t.prototype.clone=function(){return(new t).copy(this)},t.prototype.copy=function(t){return this.min.copy(t.min),this.max.copy(t.max),this},t.prototype.makeEmpty=function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},t.prototype.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},t.prototype.getCenter=function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},t.prototype.getSize=function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},t.prototype.expandByPoint=function(t){return this.min.min(t),this.max.max(t),this},t.prototype.expandByVector=function(t){return this.min.sub(t),this.max.add(t),this},t.prototype.expandByScalar=function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},t.prototype.expandByObject=function(t,i){if(void 0===i&&(i=!1),t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),j.copy(t.boundingBox),j.applyMatrix4(t.matrixWorld),this.union(j);else{var r=t.geometry;if(void 0!==r)if(i&&void 0!==r.attributes&&void 0!==r.attributes.position)for(var n=r.attributes.position,e=0,s=n.count;e<s;e++)L.fromBufferAttribute(n,e).applyMatrix4(t.matrixWorld),this.expandByPoint(L);else null===r.boundingBox&&r.computeBoundingBox(),j.copy(r.boundingBox),j.applyMatrix4(t.matrixWorld),this.union(j)}var o=t.children;for(e=0,s=o.length;e<s;e++)this.expandByObject(o[e],i);return this},t.prototype.containsPoint=function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},t.prototype.containsBox=function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},t.prototype.getParameter=function(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},t.prototype.intersectsBox=function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},t.prototype.intersectsSphere=function(t){return this.clampPoint(t.center,L),L.distanceToSquared(t.center)<=t.radius*t.radius},t.prototype.intersectsPlane=function(t){var i,r;return t.normal.x>0?(i=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),i<=-t.constant&&r>=-t.constant},t.prototype.intersectsTriangle=function(t){if(this.isEmpty())return!1;this.getCenter(D),Q.subVectors(this.max,D),N.subVectors(t.a,D),X.subVectors(t.b,D),Z.subVectors(t.c,D),Y.subVectors(X,N),U.subVectors(Z,X),R.subVectors(N,Z);var i=[0,-Y.z,Y.y,0,-U.z,U.y,0,-R.z,R.y,Y.z,0,-Y.x,U.z,0,-U.x,R.z,0,-R.x,-Y.y,Y.x,0,-U.y,U.x,0,-R.y,R.x,0];return!!H(i,N,X,Z,Q)&&(!!H(i=[1,0,0,0,1,0,0,0,1],N,X,Z,Q)&&(W.crossVectors(Y,U),H(i=[W.x,W.y,W.z],N,X,Z,Q)))},t.prototype.clampPoint=function(t,i){return i.copy(t).clamp(this.min,this.max)},t.prototype.distanceToPoint=function(t){return this.clampPoint(t,L).distanceTo(t)},t.prototype.getBoundingSphere=function(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(L).length()),t},t.prototype.intersect=function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},t.prototype.union=function(t){return this.min.min(t.min),this.max.max(t.max),this},t.prototype.applyMatrix4=function(t){return this.isEmpty()||(B[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),B[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),B[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),B[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),B[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),B[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),B[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),B[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(B)),this},t.prototype.translate=function(t){return this.min.add(t),this.max.add(t),this},t.prototype.equals=function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},t}(),B=[new V,new V,new V,new V,new V,new V,new V,new V],L=new V,j=new O,N=new V,X=new V,Z=new V,Y=new V,U=new V,R=new V,D=new V,Q=new V,W=new V,$=new V;function H(t,i,r,n,e){for(var s=0,o=t.length-3;s<=o;s+=3){$.fromArray(t,s);var h=e.x*Math.abs($.x)+e.y*Math.abs($.y)+e.z*Math.abs($.z),a=i.dot($),u=r.dot($),c=n.dot($);if(Math.max(-Math.max(a,u,c),Math.min(a,u,c))>h)return!1}return!0}var G,J=new O,K=new V,tt=new V,it=function(){function t(t,i){void 0===t&&(t=new V),void 0===i&&(i=-1),this.center=t,this.radius=i}return t.prototype.set=function(t,i){return this.center.copy(t),this.radius=i,this},t.prototype.setFromPoints=function(t,i){var r=this.center;void 0!==i?r.copy(i):J.setFromPoints(t).getCenter(r);for(var n=0,e=0,s=t.length;e<s;e++)n=Math.max(n,r.distanceToSquared(t[e]));return this.radius=Math.sqrt(n),this},t.prototype.copy=function(t){return this.center.copy(t.center),this.radius=t.radius,this},t.prototype.isEmpty=function(){return this.radius<0},t.prototype.makeEmpty=function(){return this.center.set(0,0,0),this.radius=-1,this},t.prototype.containsPoint=function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},t.prototype.distanceToPoint=function(t){return t.distanceTo(this.center)-this.radius},t.prototype.intersectsSphere=function(t){var i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i},t.prototype.intersectsBox=function(t){return t.intersectsSphere(this)},t.prototype.intersectsPlane=function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},t.prototype.clampPoint=function(t,i){var r=this.center.distanceToSquared(t);return i.copy(t),r>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},t.prototype.getBoundingBox=function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},t.prototype.applyMatrix4=function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},t.prototype.translate=function(t){return this.center.add(t),this},t.prototype.expandByPoint=function(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;K.subVectors(t,this.center);var i=K.lengthSq();if(i>this.radius*this.radius){var r=Math.sqrt(i),n=.5*(r-this.radius);this.center.addScaledVector(K,n/r),this.radius+=n}return this},t.prototype.union=function(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(tt.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(K.copy(t.center).add(tt)),this.expandByPoint(K.copy(t.center).sub(tt))),this)},t.prototype.equals=function(t){return t.center.equals(this.center)&&t.radius===this.radius},t.prototype.clone=function(){return(new t).copy(this)},t}(),rt=new V,nt=new V,et=new V,st=new V,ot=new V,ht=new V,at=new V,ut=new V,ct=new V,pt=new V,yt=!1,lt=function(){function t(t,i,r){void 0===t&&(t=new V),void 0===i&&(i=new V),void 0===r&&(r=new V),this.a=t,this.b=i,this.c=r}return t.getNormal=function(t,i,r,n){n.subVectors(r,i),rt.subVectors(t,i),n.cross(rt);var e=n.lengthSq();return e>0?n.multiplyScalar(1/Math.sqrt(e)):n.set(0,0,0)},t.getBarycoord=function(t,i,r,n,e){rt.subVectors(n,i),nt.subVectors(r,i),et.subVectors(t,i);var s=rt.dot(rt),o=rt.dot(nt),h=rt.dot(et),a=nt.dot(nt),u=nt.dot(et),c=s*a-o*o;if(0===c)return e.set(-2,-1,-1);var p=1/c,y=(a*h-o*u)*p,l=(s*u-o*h)*p;return e.set(1-y-l,l,y)},t.containsPoint=function(t,i,r,n){return this.getBarycoord(t,i,r,n,st),st.x>=0&&st.y>=0&&st.x+st.y<=1},t.getUV=function(t,i,r,n,e,s,o,h){return!1===yt&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),yt=!0),this.getInterpolation(t,i,r,n,e,s,o,h)},t.getInterpolation=function(t,i,r,n,e,s,o,h){return this.getBarycoord(t,i,r,n,st),h.setScalar(0),h.addScaledVector(e,st.x),h.addScaledVector(s,st.y),h.addScaledVector(o,st.z),h},t.isFrontFacing=function(t,i,r,n){return rt.subVectors(r,i),nt.subVectors(t,i),rt.cross(nt).dot(n)<0},t.prototype.set=function(t,i,r){return this.a.copy(t),this.b.copy(i),this.c.copy(r),this},t.prototype.setFromPointsAndIndices=function(t,i,r,n){return this.a.copy(t[i]),this.b.copy(t[r]),this.c.copy(t[n]),this},t.prototype.setFromAttributeAndIndices=function(t,i,r,n){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,n),this},t.prototype.clone=function(){return(new t).copy(this)},t.prototype.copy=function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},t.prototype.getArea=function(){return rt.subVectors(this.c,this.b),nt.subVectors(this.a,this.b),.5*rt.cross(nt).length()},t.prototype.getMidpoint=function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},t.prototype.getNormal=function(i){return t.getNormal(this.a,this.b,this.c,i)},t.prototype.getPlane=function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)},t.prototype.getBarycoord=function(i,r){return t.getBarycoord(i,this.a,this.b,this.c,r)},t.prototype.getUV=function(i,r,n,e,s){return!1===yt&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),yt=!0),t.getInterpolation(i,this.a,this.b,this.c,r,n,e,s)},t.prototype.getInterpolation=function(i,r,n,e,s){return t.getInterpolation(i,this.a,this.b,this.c,r,n,e,s)},t.prototype.containsPoint=function(i){return t.containsPoint(i,this.a,this.b,this.c)},t.prototype.isFrontFacing=function(i){return t.isFrontFacing(this.a,this.b,this.c,i)},t.prototype.intersectsBox=function(t){return t.intersectsTriangle(this)},t.prototype.closestPointToPoint=function(t,i){var r,n,e=this.a,s=this.b,o=this.c;ot.subVectors(s,e),ht.subVectors(o,e),ut.subVectors(t,e);var h=ot.dot(ut),a=ht.dot(ut);if(h<=0&&a<=0)return i.copy(e);ct.subVectors(t,s);var u=ot.dot(ct),c=ht.dot(ct);if(u>=0&&c<=u)return i.copy(s);var p=h*c-u*a;if(p<=0&&h>=0&&u<=0)return r=h/(h-u),i.copy(e).addScaledVector(ot,r);pt.subVectors(t,o);var y=ot.dot(pt),l=ht.dot(pt);if(l>=0&&y<=l)return i.copy(o);var f=y*a-h*l;if(f<=0&&a>=0&&l<=0)return n=a/(a-l),i.copy(e).addScaledVector(ht,n);var x=u*l-y*c;if(x<=0&&c-u>=0&&y-l>=0)return at.subVectors(o,s),n=(c-u)/(c-u+(y-l)),i.copy(s).addScaledVector(at,n);var m=1/(x+f+p);return r=f*m,n=p*m,i.copy(e).addScaledVector(ot,r).addScaledVector(ht,n)},t.prototype.equals=function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)},t}(),ft=function(){function t(t,i,r,n,e,s,o,h,a){this.isMatrix3=!0,this.elements=[],this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,i,r,n,e,s,o,h,a)}return t.prototype.set=function(t,i,r,n,e,s,o,h,a){var u=this.elements;return u[0]=t,u[1]=n,u[2]=o,u[3]=i,u[4]=e,u[5]=h,u[6]=r,u[7]=s,u[8]=a,this},t.prototype.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},t.prototype.copy=function(t){var i=this.elements,r=t.elements;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],this},t.prototype.extractBasis=function(t,i,r){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this},t.prototype.setFromMatrix4=function(t){var i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this},t.prototype.multiply=function(t){return this.multiplyMatrices(this,t)},t.prototype.premultiply=function(t){return this.multiplyMatrices(t,this)},t.prototype.multiplyMatrices=function(t,i){var r=t.elements,n=i.elements,e=this.elements,s=r[0],o=r[3],h=r[6],a=r[1],u=r[4],c=r[7],p=r[2],y=r[5],l=r[8],f=n[0],x=n[3],m=n[6],d=n[1],M=n[4],z=n[7],w=n[2],b=n[5],v=n[8];return e[0]=s*f+o*d+h*w,e[3]=s*x+o*M+h*b,e[6]=s*m+o*z+h*v,e[1]=a*f+u*d+c*w,e[4]=a*x+u*M+c*b,e[7]=a*m+u*z+c*v,e[2]=p*f+y*d+l*w,e[5]=p*x+y*M+l*b,e[8]=p*m+y*z+l*v,this},t.prototype.multiplyScalar=function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},t.prototype.determinant=function(){var t=this.elements,i=t[0],r=t[1],n=t[2],e=t[3],s=t[4],o=t[5],h=t[6],a=t[7],u=t[8];return i*s*u-i*o*a-r*e*u+r*o*h+n*e*a-n*s*h},t.prototype.invert=function(){var t=this.elements,i=t[0],r=t[1],n=t[2],e=t[3],s=t[4],o=t[5],h=t[6],a=t[7],u=t[8],c=u*s-o*a,p=o*h-u*e,y=a*e-s*h,l=i*c+r*p+n*y;if(0===l)return this.set(0,0,0,0,0,0,0,0,0);var f=1/l;return t[0]=c*f,t[1]=(n*a-u*r)*f,t[2]=(o*r-n*s)*f,t[3]=p*f,t[4]=(u*i-n*h)*f,t[5]=(n*e-o*i)*f,t[6]=y*f,t[7]=(r*h-a*i)*f,t[8]=(s*i-r*e)*f,this},t.prototype.transpose=function(){var t,i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this},t.prototype.getNormalMatrix=function(t){return this.setFromMatrix4(t).invert().transpose()},t.prototype.transposeIntoArray=function(t){var i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this},t.prototype.setUvTransform=function(t,i,r,n,e,s,o){var h=Math.cos(e),a=Math.sin(e);return this.set(r*h,r*a,-r*(h*s+a*o)+s+t,-n*a,n*h,-n*(-a*s+h*o)+o+i,0,0,1),this},t.prototype.scale=function(t,i){return this.premultiply(xt.makeScale(t,i)),this},t.prototype.rotate=function(t){return this.premultiply(xt.makeRotation(-t)),this},t.prototype.translate=function(t,i){return this.premultiply(xt.makeTranslation(t,i)),this},t.prototype.makeTranslation=function(t,i){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,i,0,0,1),this},t.prototype.makeRotation=function(t){var i=Math.cos(t),r=Math.sin(t);return this.set(i,-r,0,r,i,0,0,0,1),this},t.prototype.makeScale=function(t,i){return this.set(t,0,0,0,i,0,0,0,1),this},t.prototype.equals=function(t){for(var i=this.elements,r=t.elements,n=0;n<9;n++)if(i[n]!==r[n])return!1;return!0},t.prototype.fromArray=function(t,i){void 0===i&&(i=0);for(var r=0;r<9;r++)this.elements[r]=t[r+i];return this},t.prototype.toArray=function(t,i){void 0===t&&(t=[]),void 0===i&&(i=0);var r=this.elements;return t[i]=r[0],t[i+1]=r[1],t[i+2]=r[2],t[i+3]=r[3],t[i+4]=r[4],t[i+5]=r[5],t[i+6]=r[6],t[i+7]=r[7],t[i+8]=r[8],t},t.prototype.clone=function(){return(new t).fromArray(this.elements)},t}(),xt=new ft,mt=new V,dt=new V,Mt=new ft,zt=function(){function t(t,i){void 0===t&&(t=new V(1,0,0)),void 0===i&&(i=0),this.isPlane=!0,this.normal=t,this.constant=i}return t.prototype.set=function(t,i){return this.normal.copy(t),this.constant=i,this},t.prototype.setComponents=function(t,i,r,n){return this.normal.set(t,i,r),this.constant=n,this},t.prototype.setFromNormalAndCoplanarPoint=function(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this},t.prototype.setFromCoplanarPoints=function(t,i,r){var n=mt.subVectors(r,i).cross(dt.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this},t.prototype.copy=function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},t.prototype.normalize=function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},t.prototype.negate=function(){return this.constant*=-1,this.normal.negate(),this},t.prototype.distanceToPoint=function(t){return this.normal.dot(t)+this.constant},t.prototype.distanceToSphere=function(t){return this.distanceToPoint(t.center)-t.radius},t.prototype.projectPoint=function(t,i){return i.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))},t.prototype.intersectLine=function(t,i){var r=t.delta(mt),n=this.normal.dot(r);if(0===n)return 0===this.distanceToPoint(t.start)?i.copy(t.start):null;var e=-(t.start.dot(this.normal)+this.constant)/n;return e<0||e>1?null:i.copy(t.start).addScaledVector(r,e)},t.prototype.intersectsLine=function(t){var i=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return i<0&&r>0||r<0&&i>0},t.prototype.intersectsBox=function(t){return t.intersectsPlane(this)},t.prototype.intersectsSphere=function(t){return t.intersectsPlane(this)},t.prototype.coplanarPoint=function(t){return t.copy(this.normal).multiplyScalar(-this.constant)},t.prototype.applyMatrix4=function(t,i){var r=i||Mt.getNormalMatrix(t),n=this.coplanarPoint(mt).applyMatrix4(t),e=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(e),this},t.prototype.translate=function(t){return this.constant-=t.dot(this.normal),this},t.prototype.equals=function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},t.prototype.clone=function(){return(new t).copy(this)},t}();function wt(t,i,r){return"Number"===l(t)?bt(t,i,r):vt(t,i,r)}function bt(t,i,r){return t+(i-t)*r}function vt(t,i,r){var n=t.clone(),e=i.clone();return n.add(e.subVectors(e,n).multiplyScalar(r))}!function(t){t.Step="step",t.SinusoidalIn="SinusoidalIn",t.SinusoidalOut="SinusoidalOut",t.SinusoidalInOut="SinusoidalInOut",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut",t.ExpoIn="ExpoIn",t.ExpoOut="ExpoOut",t.ExpoInOut="ExpoInOut",t.CircularIn="CircularIn",t.CircularOut="CircularOut",t.CircularInOut="CircularInOut"}(G||(G={}));function _t(t,i,r){return wt(t,i,-1*Math.cos(r*Math.PI)+1)}function gt(t,i,r){return wt(t,i,Math.sin(r*Math.PI))}function St(t,i,r,n){return void 0===n&&(n=2),wt(t,i,Math.pow(r,n))}function At(t,i,r,n){return void 0===n&&(n=2),wt(t,i,1-Math.pow(1-r,n))}function Et(t,i,r){return wt(t,i,0===r?0:Math.pow(2,10*(r-1)))}function Ct(t,i,r){return wt(t,i,1===r?1:-1*Math.pow(2,-10*r)+1)}function Pt(t,i,r){return wt(t,i,-1*(Math.sqrt(1-r*r)-1))}function Tt(t,i,r){return wt(t,i,1-(r-=1)*r)}var kt=function(t,i,r,n,e,s){switch(t){case G.Step:return function(t,i,r,n){if(n<=1||r<=0)return t;if(r>=1)return i;var e=n-1;return vt(t,i,Math.floor(r*n)/e)}(i,r,n,s);case G.EaseIn:return St(i,r,n,e);case G.EaseOut:return At(i,r,n,e);case G.EaseInOut:return function(t,i,r,n){return void 0===n&&(n=2),wt(t,i,r<.5?.5*St(0,1,2*r,n):.5*At(0,1,2*r-1,n)+.5)}(i,r,n,e);case G.SinusoidalIn:return _t(i,r,n);case G.SinusoidalOut:return gt(i,r,n);case G.SinusoidalInOut:return function(t,i,r){return wt(t,i,r<.5?.5*_t(0,1,2*r):.5*gt(0,1,2*r-1)+.5)}(i,r,n);case G.ExpoIn:return Et(i,r,n);case G.ExpoOut:return Ct(i,r,n);case G.ExpoInOut:return function(t,i,r){return wt(t,i,r<.5?.5*Et(0,1,2*r):.5*Ct(0,1,2*r-1)+.5)}(i,r,n);case G.CircularIn:return Pt(i,r,n);case G.CircularOut:return Tt(i,r,n);case G.CircularInOut:return function(t,i,r){return wt(t,i,r<.5?Pt(0,1,2*r)/2:Tt(0,1,2*r-1)/2+.5)}(i,r,n)}},qt=function(){function t(i,r){void 0===i&&(i=0),void 0===r&&(r=0),t.prototype.isVector2=!0,this.x=i,this.y=r}return Object.defineProperty(t.prototype,"width",{get:function(){return this.x},set:function(t){this.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.y},set:function(t){this.y=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,i){return this.x=t,this.y=i,this},t.prototype.setScalar=function(t){return this.x=t,this.y=t,this},t.prototype.setX=function(t){return this.x=t,this},t.prototype.setY=function(t){return this.y=t,this},t.prototype.setComponent=function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this},t.prototype.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},t.prototype.addVectors=function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},t.prototype.addScaledVector=function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this},t.prototype.subVectors=function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},t.prototype.applyMatrix3=function(t){var i=this.x,r=this.y,n=t.elements;return this.x=n[0]*i+n[3]*r+n[6],this.y=n[1]*i+n[4]*r+n[7],this},t.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},t.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},t.prototype.clamp=function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this},t.prototype.clampScalar=function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this},t.prototype.clampLength=function(t,i){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))},t.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)},t.prototype.normalize=function(){return this.divideScalar(this.length()||1)},t.prototype.angle=function(){return Math.atan2(-this.y,-this.x)+Math.PI},t.prototype.angleTo=function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;var r=this.dot(t)/i;return Math.acos(C(r,-1,1))},t.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},t.prototype.distanceToSquared=function(t){var i=this.x-t.x,r=this.y-t.y;return i*i+r*r},t.prototype.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},t.prototype.setLength=function(t){return this.normalize().multiplyScalar(t)},t.prototype.lerp=function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this},t.prototype.lerpVectors=function(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.fromArray=function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this},t.prototype.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t},t.prototype.fromBufferAttribute=function(t,i){return this.x=t.getX(i),this.y=t.getY(i),this},t.prototype.rotateAround=function(t,i){var r=Math.cos(i),n=Math.sin(i),e=this.x-t.x,s=this.y-t.y;return this.x=e*r-s*n+t.x,this.y=e*n+s*r+t.y,this},t.prototype.random=function(){return this.x=Math.random(),this.y=Math.random(),this},t.prototype[Symbol.iterator]=function(){return w(this,(function(t){switch(t.label){case 0:return[4,this.x];case 1:return t.sent(),[4,this.y];case 2:return t.sent(),[2]}}))},t}(),Vt=function(){function t(i,r,n,e){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===e&&(e=1),t.prototype.isVector4=!0,this.x=i,this.y=r,this.z=n,this.w=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this.z},set:function(t){this.z=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.w},set:function(t){this.w=t},enumerable:!1,configurable:!0}),t.prototype.set=function(t,i,r,n){return this.x=t,this.y=i,this.z=r,this.w=n,this},t.prototype.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},t.prototype.setX=function(t){return this.x=t,this},t.prototype.setY=function(t){return this.y=t,this},t.prototype.setZ=function(t){return this.z=t,this},t.prototype.setW=function(t){return this.w=t,this},t.prototype.setComponent=function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this},t.prototype.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},t.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},t.prototype.addVectors=function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},t.prototype.addScaledVector=function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},t.prototype.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},t.prototype.subVectors=function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},t.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.applyMatrix4=function(t){var i=this.x,r=this.y,n=this.z,e=this.w,s=t.elements;return this.x=s[0]*i+s[4]*r+s[8]*n+s[12]*e,this.y=s[1]*i+s[5]*r+s[9]*n+s[13]*e,this.z=s[2]*i+s[6]*r+s[10]*n+s[14]*e,this.w=s[3]*i+s[7]*r+s[11]*n+s[15]*e,this},t.prototype.divideScalar=function(t){return this.multiplyScalar(1/t)},t.prototype.setAxisAngleFromQuaternion=function(t){this.w=2*Math.acos(t.w);var i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this},t.prototype.setAxisAngleFromRotationMatrix=function(t){var i,r,n,e,s=.01,o=.1,h=t.elements,a=h[0],u=h[4],c=h[8],p=h[1],y=h[5],l=h[9],f=h[2],x=h[6],m=h[10];if(Math.abs(u-p)<s&&Math.abs(c-f)<s&&Math.abs(l-x)<s){if(Math.abs(u+p)<o&&Math.abs(c+f)<o&&Math.abs(l+x)<o&&Math.abs(a+y+m-3)<o)return this.set(1,0,0,0),this;i=Math.PI;var d=(a+1)/2,M=(y+1)/2,z=(m+1)/2,w=(u+p)/4,b=(c+f)/4,v=(l+x)/4;return d>M&&d>z?d<s?(r=0,n=.707106781,e=.707106781):(n=w/(r=Math.sqrt(d)),e=b/r):M>z?M<s?(r=.707106781,n=0,e=.707106781):(r=w/(n=Math.sqrt(M)),e=v/n):z<s?(r=.707106781,n=.707106781,e=0):(r=b/(e=Math.sqrt(z)),n=v/e),this.set(r,n,e,i),this}var _=Math.sqrt((x-l)*(x-l)+(c-f)*(c-f)+(p-u)*(p-u));return Math.abs(_)<.001&&(_=1),this.x=(x-l)/_,this.y=(c-f)/_,this.z=(p-u)/_,this.w=Math.acos((a+y+m-1)/2),this},t.prototype.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},t.prototype.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},t.prototype.clamp=function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this},t.prototype.clampScalar=function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this},t.prototype.clampLength=function(t,i){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))},t.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},t.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},t.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},t.prototype.normalize=function(){return this.divideScalar(this.length()||1)},t.prototype.setLength=function(t){return this.normalize().multiplyScalar(t)},t.prototype.lerp=function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},t.prototype.lerpVectors=function(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this.w=t.w+(i.w-t.w)*r,this},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},t.prototype.fromArray=function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this},t.prototype.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t},t.prototype.fromBufferAttribute=function(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this},t.prototype.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this},t.prototype[Symbol.iterator]=function(){return w(this,(function(t){switch(t.label){case 0:return[4,this.x];case 1:return t.sent(),[4,this.y];case 2:return t.sent(),[4,this.z];case 3:return t.sent(),[4,this.w];case 4:return t.sent(),[2]}}))},t}();export{O as Box3,u as IO,e as IosOrAndroid,ft as Matrix3,zt as Plane,it as Sphere,lt as Triangle,qt as Vector2,V as Vector3,Vt as Vector4,a as blobToString,i as check,t as chunk,z as copy,v as debounce,f as formatTime,c as getFpsTime,r as getQuery,n as getStringByteLength,_ as intersection_rectangle,wt as lerp,bt as lerpNumber,vt as lerpVector3,kt as lerpVector3Ease,p as now,M as os,y as remainingTime,s as shuffle,o as sliceByByte,h as solveIosKeybordBug,d as throttle,l as typeOf};
